{"version":3,"file":"load-data-d3554855.js","sources":["../../../home/runner/work/metastanza/metastanza/node_modules/d3-dsv/src/csv.js","../../../home/runner/work/metastanza/metastanza/node_modules/d3-dsv/src/tsv.js","../../../home/runner/work/metastanza/metastanza/node_modules/d3-fetch/src/text.js","../../../home/runner/work/metastanza/metastanza/node_modules/d3-fetch/src/dsv.js","../../../home/runner/work/metastanza/metastanza/lib/load-data.js"],"sourcesContent":["import dsv from \"./dsv.js\";\n\nvar csv = dsv(\",\");\n\nexport var csvParse = csv.parse;\nexport var csvParseRows = csv.parseRows;\nexport var csvFormat = csv.format;\nexport var csvFormatBody = csv.formatBody;\nexport var csvFormatRows = csv.formatRows;\nexport var csvFormatRow = csv.formatRow;\nexport var csvFormatValue = csv.formatValue;\n","import dsv from \"./dsv.js\";\n\nvar tsv = dsv(\"\\t\");\n\nexport var tsvParse = tsv.parse;\nexport var tsvParseRows = tsv.parseRows;\nexport var tsvFormat = tsv.format;\nexport var tsvFormatBody = tsv.formatBody;\nexport var tsvFormatRows = tsv.formatRows;\nexport var tsvFormatRow = tsv.formatRow;\nexport var tsvFormatValue = tsv.formatValue;\n","function responseText(response) {\n  if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\n  return response.text();\n}\n\nexport default function(input, init) {\n  return fetch(input, init).then(responseText);\n}\n","import {csvParse, dsvFormat, tsvParse} from \"d3-dsv\";\nimport text from \"./text.js\";\n\nfunction dsvParse(parse) {\n  return function(input, init, row) {\n    if (arguments.length === 2 && typeof init === \"function\") row = init, init = undefined;\n    return text(input, init).then(function(response) {\n      return parse(response, row);\n    });\n  };\n}\n\nexport default function dsv(delimiter, input, init, row) {\n  if (arguments.length === 3 && typeof init === \"function\") row = init, init = undefined;\n  var format = dsvFormat(delimiter);\n  return text(input, init).then(function(response) {\n    return format.parse(response, row);\n  });\n}\n\nexport var csv = dsvParse(csvParse);\nexport var tsv = dsvParse(tsvParse);\n","import * as d3 from \"d3\";\n\n// TODO: test\nexport default function loadData(url, type = \"json\") {\n  switch (type) {\n    case \"tsv\":\n      return loadTSV(url);\n    case \"csv\":\n      return loadCSV(url);\n    case \"sparql-results-json\":\n      return loadSPARQL(url);\n    case \"json\":\n    default:\n      return loadJSON(url);\n  }\n}\n\nfunction loadTSV(url) {\n  // expect TSV data with a header line\n  return d3.tsv(url);\n}\n\nfunction loadCSV(url) {\n  // expect CSV data with a header line\n  return d3.csv(url);\n}\n\nasync function loadJSON(url) {\n  const res = await fetch(url);\n  return await res.json();\n}\n\nasync function loadSPARQL(url) {\n  const json = await loadJSON(url);\n  return sparql2table(json);\n}\n\n// TODO: test & improve\nfunction sparql2table(json) {\n  const head = json.head.vars;\n  const data = json.results.bindings;\n\n  return data.map((item) => {\n    const row = {};\n    head.forEach((key) => {\n      row[key] = item[key].value;\n    });\n    return row;\n  });\n}\n"],"names":["dsv","csv","tsv","d3.tsv","d3.csv"],"mappings":"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"}