{"version":3,"file":"dev-hash-table.js","sources":["../../../home/runner/work/metastanza/metastanza/stanzas/dev-hash-table/app.vue","../../../home/runner/work/metastanza/metastanza/stanzas/dev-hash-table/index.js"],"sourcesContent":["<template>\n  <div class=\"tableWrapper\">\n    <!-- <div class=\"tableWrapper\" @scroll=\"handleScroll\"> -->\n    <!-- <table v-if=\"state.allRows\">\n      <thead>\n        <tr>\n          <th v-for=\"column in state.columns\" :key=\"column.id\">\n            {{ column.label }}\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"row in state.allRows\" :key=\"row.id\">\n          <td v-for=\"cell in row\" :key=\"cell.column.id\">\n            <span v-if=\"cell.href\">\n              <a :href=\"cell.href\" target=\"_blank\">{{ cell.value }}</a>\n            </span>\n            <span v-else>\n              {{ cell.value }}\n            </span>\n          </td>\n        </tr>\n        <tr v-if=\"state.isFetchingData\">\n          <td :colspan=\"state.columns.length\" class=\"loadingWrapper\">\n            <div class=\"dotTyping\"></div>\n          </td>\n        </tr>\n      </tbody>\n    </table> -->\n  </div>\n</template>\n\n<script>\nimport { defineComponent, reactive, onMounted } from \"vue\";\n\nimport metadata from \"./metadata.json\";\n\nexport default defineComponent({\n  props: metadata[\"stanza:parameter\"].map((p) => p[\"stanza:key\"]),\n\n  setup(params) {\n    const state = reactive({\n      responseJSON: null, // for download. may consume extra memory\n\n      columns: [],\n      allRows: [],\n\n      offset: 0,\n\n      isFetchingData: false,\n    });\n\n    async function fetchData() {\n      state.isFetchingData = true;\n      const res = await fetch(`${params.table_data_api}`);\n      // const data = await res.json();\n      console.log(\"res\", res);\n\n      // state.responseJSON = data;\n      // const { vars, labels, order, href } = data.head;\n\n      // const columns = zip(vars, labels, order, href)\n      //   .map(([_var, label, _order, _href]) => {\n      //     return {\n      //       id: _var,\n      //       label,\n      //       order: _order,\n      //       href: _href,\n      //     };\n      //   })\n      //   .filter((column) => column.label !== null);\n\n      // state.columns = orderBy(columns, [\"order\"]);\n\n      // state.allRows = state.allRows.concat(\n      //   data.body.map((row) => {\n      //     return columns.map((column) => {\n      //       return {\n      //         column,\n      //         value: row[column.id].value,\n      //         href: column.href ? row[column.href].value : null,\n      //       };\n      //     });\n      //   })\n      // );\n      // state.isFetchingData = false;\n    }\n\n    // function handleScroll(e) {\n    //   if (\n    //     e.path[0].scrollTop ===\n    //       e.path[0].firstChild.clientHeight - e.path[0].clientHeight &&\n    //     !state.isFetchingData\n    //   ) {\n    //     state.offset++;\n    //     fetchData();\n    //   }\n    // }\n\n    onMounted(() => {\n      fetchData();\n    });\n\n    return {\n      state,\n      // handleScroll,\n    };\n  },\n});\n</script>\n","import { createApp } from \"vue\";\nimport App from \"./app.vue\";\n\nexport default async function tableWithPagination(stanza, params) {\n  const main = stanza.root.querySelector(\"main\");\n  createApp(App, params).mount(main);\n}\n"],"names":["_createBlock","_createCommentVNode","App"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,aAAe,eAAe,CAAC;EAC7B,KAAK,EAAE,QAAQ,CAAC,kBAAkB,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC,CAAC;;EAE/D,KAAK,CAAC,MAAM,EAAE;IACZ,MAAM,QAAQ,QAAQ,CAAC;MACrB,YAAY,EAAE,IAAI;;MAElB,OAAO,EAAE,EAAE;MACX,OAAO,EAAE,EAAE;;MAEX,MAAM,EAAE,CAAC;;MAET,cAAc,EAAE,KAAK;KACtB,CAAC;;IAEF,eAAe,SAAS,GAAG;MACzB,KAAK,CAAC,iBAAiB,IAAI;MAC3B,MAAM,MAAM,MAAM,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;;MAEnD,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA2CzB,SAAS,CAAC,MAAM;MACd,SAAS,EAAE;KACZ,CAAC;;IAEF,OAAO;MACL,KAAK;;KAEN;GACF;AACH,CAAC,CAAC;;qBA3GK,KAAK,EAAC,cAAc;;;uBAAzBA,mBAAA;IACEC;IACAA;;;;;;;ACAW,eAAe,mBAAmB,CAAC,MAAM,EAAE,MAAM,EAAE;AAClE,EAAE,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;AACjD,EAAE,SAAS,CAACC,MAAG,EAAE,MAAM,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AACrC;;;;;;;;;;;;;;;;;;;;;;;;"}