{"version":3,"file":"text.js","sources":["../../../home/runner/work/metastanza/metastanza/stanzas/text/index.js"],"sourcesContent":["import Stanza from \"togostanza/stanza\";\n\nimport loadData from \"@/lib/load-data\";\n\nimport { appendCustomCss } from \"@/lib/metastanza_utils.js\";\n\nexport default class Text extends Stanza {\n  menu() {\n    return [\n      {\n        type: \"item\",\n        label: \"Download Text\",\n        handler: () => {\n          const textBlob = new Blob([this._dataset.value], {\n            type: \"text/plain\",\n          });\n          const textUrl = URL.createObjectURL(textBlob);\n          const link = document.createElement(\"a\");\n          document.body.appendChild(link);\n          link.href = textUrl;\n          link.download = \"text.txt\";\n          link.click();\n          document.body.removeChild(link);\n        },\n      },\n    ];\n  }\n\n  async render() {\n    this._dataset = await loadData(\n      this.params[\"data-url\"],\n      this.params[\"data-type\"]\n    );\n\n    this.renderTemplate({\n      template: \"stanza.html.hbs\",\n      parameters: {\n        rows: [\n          {\n            value: this._dataset.value,\n          },\n        ],\n      },\n    });\n\n    appendCustomCss(this, this.params[\"custom-css-url\"]);\n\n    const width = this.params[\"width\"];\n    const height = this.params[\"height\"];\n    const padding = this.params[\"padding\"];\n    const container = this.root.querySelector(\".container\");\n    const main = this.root.querySelector(\"main\");\n    main.setAttribute(\"style\", `padding: ${padding}px;`);\n    container.setAttribute(`style`, `width: ${width}px; height: ${height}px;`);\n  }\n}\n"],"names":[],"mappings":";;;;;;AAMe,MAAM,IAAI,SAAS,MAAM,CAAC;AACzC,EAAE,IAAI,GAAG;AACT,IAAI,OAAO;AACX,MAAM;AACN,QAAQ,IAAI,EAAE,MAAM;AACpB,QAAQ,KAAK,EAAE,eAAe;AAC9B,QAAQ,OAAO,EAAE,MAAM;AACvB,UAAU,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;AAC3D,YAAY,IAAI,EAAE,YAAY;AAC9B,WAAW,CAAC,CAAC;AACb,UAAU,MAAM,OAAO,GAAG,GAAG,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;AACxD,UAAU,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;AACnD,UAAU,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;AAC1C,UAAU,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC;AAC9B,UAAU,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;AACrC,UAAU,IAAI,CAAC,KAAK,EAAE,CAAC;AACvB,UAAU,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;AAC1C,SAAS;AACT,OAAO;AACP,KAAK,CAAC;AACN,GAAG;AACH;AACA,EAAE,MAAM,MAAM,GAAG;AACjB,IAAI,IAAI,CAAC,QAAQ,GAAG,MAAM,QAAQ;AAClC,MAAM,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;AAC7B,MAAM,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC;AAC9B,KAAK,CAAC;AACN;AACA,IAAI,IAAI,CAAC,cAAc,CAAC;AACxB,MAAM,QAAQ,EAAE,iBAAiB;AACjC,MAAM,UAAU,EAAE;AAClB,QAAQ,IAAI,EAAE;AACd,UAAU;AACV,YAAY,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK;AACtC,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK,CAAC,CAAC;AACP;AACA,IAAI,eAAe,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC,CAAC;AACzD;AACA,IAAI,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AACvC,IAAI,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;AACzC,IAAI,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;AAC3C,IAAI,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;AAC5D,IAAI,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;AACjD,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;AACzD,IAAI,SAAS,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,OAAO,EAAE,KAAK,CAAC,YAAY,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;AAC/E,GAAG;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}